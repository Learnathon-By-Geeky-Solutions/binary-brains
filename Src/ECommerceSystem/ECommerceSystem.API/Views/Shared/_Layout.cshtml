<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>@ViewData["Title"] - AdminLTE Dashboard</title>
    <!-- Primary Meta Tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="AdminLTE v4 | Dashboard" />
    <meta name="author" content="ColorlibHQ" />
    <meta name="description" content="AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS." />
    <meta name="keywords" content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard" />

    <!-- Fonts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@fontsource/source-sans-3@5.0.12/index.css" integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q=" crossorigin="anonymous" />

    <!-- Third Party Plugins -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/styles/overlayscrollbars.min.css" integrity="sha256-tZHrRjVqNSRyWg2wbppGnT833E/Ys0DHWGwT04GiqQg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha256-9kPW/n5nn53j4WMRYAxe9c1rCY96Oogo/MKSVdKzPmI=" crossorigin="anonymous" />

    <!-- AdminLTE CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta1/dist/css/adminlte.min.css" />

    <!-- ApexCharts -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css" integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0=" crossorigin="anonymous" />

    <!-- jsVectorMap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/css/jsvectormap.min.css" integrity="sha256-+uGLJmmTKOqBr+2E6KDYs/NRsHxSkONXFHUL0fy2O/4=" crossorigin="anonymous" />
</head>
<body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <div class="app-wrapper">
        <!-- Header -->
        <nav class="app-header navbar navbar-expand bg-body shadow-sm">
            <div class="container-fluid">
                <!-- Brand/Logo -->
                <a class="navbar-brand d-flex align-items-center" href="/">
                    <img src="https://adminlte.io/themes/v3/dist/img/AdminLTELogo.png" alt="Store Logo" class="brand-image opacity-75 shadow me-2" style="height: 30px;" />
                    <span class="fw-bold text-primary">E-Shop</span>
                </a>

                <!-- Start Navbar Links -->
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" data-lte-toggle="sidebar" href="#" role="button">
                            <i class="bi bi-list"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark hover-primary" asp-area="Customer" asp-controller="Home" asp-action="Index">
                            <i class="bi bi-house me-1"></i> Home
                        </a>
                    </li>
                    @{
                        if (User.IsInRole(SD.Role_Admin))
                        {
                            <li class="nav-item">
                                <a class="nav-link text-dark hover-primary" asp-area="Admin" asp-controller="Dashboard" asp-action="Index">
                                    <i class="bi bi-speedometer me-1"></i> Dashboard
                                </a>
                            </li>
                        }
                    }
                    <li class="nav-item">
                        <a class="nav-link text-dark hover-primary" asp-area="Customer" asp-controller="Cart" asp-action="Index">
                            <i class="bi bi-cart me-1"></i> Cart
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark hover-primary" asp-area="Admin" asp-controller="Order" asp-action="Index">
                            <i class="bi bi-box-seam me-1"></i> Manage Order
                        </a>
                    </li>
                </ul>
                <!-- End Navbar Links -->
                <!-- Right Navbar Links -->
                <ul class="navbar-nav ms-auto align-items-center">
                    <!-- Search Form -->
                    <li class="nav-item">
                        <form class="d-flex" role="search">
                            <input class="form-control me-2" type="search" placeholder="Search products..." aria-label="Search" style="max-width: 200px;" />
                            <button class="btn btn-outline-primary" type="submit">
                                <i class="bi bi-search"></i>
                            </button>
                        </form>
                    </li>
                    <!-- Fullscreen Toggle -->
                    <li class="nav-item">
                        <a class="nav-link text-dark hover-primary" href="#" data-lte-toggle="fullscreen">
                            <i data-lte-icon="maximize" class="bi bi-arrows-fullscreen"></i>
                            <i data-lte-icon="minimize" class="bi bi-fullscreen-exit" style="display: none;"></i>
                        </a>
                    </li>
                    <!-- User Profile/Login -->
                    <li class="nav-item dropdown user-footer">
                        <a class="nav-link dropdown-toggle text-dark hover-primary" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i>
                            <span>@(User.Identity?.Name ?? "Guest")</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <partial name="_LoginPartial" />
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- End Header -->
        <!-- Sidebar (Unchanged) -->
        @if (User.IsInRole(SD.Role_Admin))
        {
            <aside class="app-sidebar bg-body-secondary shadow" data-bs-theme="dark">
                <div class="sidebar-brand">
                    <a href="/" class="brand-link">
                        <img src="https://adminlte.io/themes/v3/dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image opacity-75 shadow" />
                        <span class="brand-text fw-light">AdminLTE 4</span>
                    </a>
                </div>
                <div class="sidebar-wrapper">
                    <nav class="mt-2">
                        <ul class="nav sidebar-menu flex-column" data-lte-toggle="treeview" role="menu" data-accordion="false">
                            <li class="nav-item menu-open">
                                <a href="#" class="nav-link active">
                                    <i class="nav-icon bi bi-speedometer"></i>
                                    <p>
                                        Dashboard
                                        <i class="nav-arrow bi bi-chevron-right"></i>
                                    </p>
                                </a>
                               
                            </li>
                            <!-- MANAGEMENT Section -->
                            <li class="nav-header">MANAGEMENT</li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="Admin" asp-controller="Category" asp-action="Index">
                                    <i class="nav-icon bi bi-tags"></i>
                                    <p>Category</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="Admin" asp-controller="Product" asp-action="Index">
                                    <i class="nav-icon bi bi-box-seam"></i>
                                    <p>Product</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="Admin" asp-controller="Company" asp-action="Index">
                                    <i class="nav-icon bi bi-building"></i>
                                    <p>Company</p>
                                </a>
                            </li>
                           
                            <!-- End of MANAGEMENT Section -->
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon bi bi-gear"></i>
                                    <p>
                                        Theme Generator
                                        <i class="nav-arrow bi bi-chevron-right"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon bi bi-circle"></i>
                                            <p>Widgets Options</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon bi bi-table"></i>
                                    <p>
                                        Tables
                                        <i class="nav-arrow bi bi-chevron-right"></i>
                                    </p>
                                </a>
                                <ul class="nav nav-treeview">
                                    <li class="nav-item">
                                        <a href="#" class="nav-link">
                                            <i class="nav-icon bi bi-circle"></i>
                                            <p>Simple Tables</p>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-header">EXAMPLES</li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon bi bi-calendar"></i>
                                    <p>Calendar</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon bi bi-circle text-warning"></i>
                                    <p>Warning</p>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <i class="nav-icon bi bi-circle text-info"></i>
                                    <p>Informational</p>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </aside>
        }
        <!-- End Sidebar -->
        <!-- App Main -->
        <main class="app-main">
            @RenderBody()
        </main>
        <!-- End App Main -->
        <!-- Footer -->
        <footer class="app-footer bg-primary text-white py-4">
            <div class="container">
                <div class="row align-items-center">
                    <!-- Copyright -->
                    <div class="col-12 col-md-6 text-center text-md-start mb-3 mb-md-0">
                        <strong>
                            Copyright © 2014-2024
                            <a href="https://adminlte.io" class="text-warning text-decoration-none">AdminLTE.io</a>.
                        </strong>
                        All rights reserved.
                    </div>
                    <!-- Quick Links and Social Media -->
                    <div class="col-12 col-md-6 text-center text-md-end">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item">
                                <a href="#" class="text-warning text-decoration-none hover-light">About</a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#" class="text-warning text-decoration-none hover-light">Contact</a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#" class="text-white hover-light">
                                    <i class="bi bi-facebook"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#" class="text-white hover-light">
                                    <i class="bi bi-twitter"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#" class="text-white hover-light">
                                    <i class="bi bi-instagram"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
        <!-- End Footer -->
    </div>

    <!-- Scripts (Unchanged) -->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.10.1/browser/overlayscrollbars.browser.es6.min.js" integrity="sha256-dghWARbRe2eLlIJ56wNB+b760ywulqK3DzZYEpsg2fQ=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@4.0.0-beta1/dist/js/adminlte.min.js"></script>

    <!-- OverlayScrollbars Configure -->
    <script>
        const SELECTOR_SIDEBAR_WRAPPER = '.sidebar-wrapper';
        const Default = {
            scrollbarTheme: 'os-theme-light',
            scrollbarAutoHide: 'leave',
            scrollbarClickScroll: true,
        };
        document.addEventListener('DOMContentLoaded', function () {
            const sidebarWrapper = document.querySelector(SELECTOR_SIDEBAR_WRAPPER);
            if (sidebarWrapper && typeof OverlayScrollbarsGlobal?.OverlayScrollbars !== 'undefined') {
                OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
                    scrollbars: {
                        theme: Default.scrollbarTheme,
                        autoHide: Default.scrollbarAutoHide,
                        clickScroll: Default.scrollbarClickScroll,
                    },
                });
            }
        });
    </script>

    <!-- SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js" integrity="sha256-ipiJrswvAR4VAx/th+6zWsdeYmVae0iJuiR+6OqHJHQ=" crossorigin="anonymous"></script>
    <script>
        const connectedSortables = document.querySelectorAll('.connectedSortable');
        connectedSortables.forEach((connectedSortable) => {
            let sortable = new Sortable(connectedSortable, {
                group: 'shared',
                handle: '.card-header',
            });
        });

        const cardHeaders = document.querySelectorAll('.connectedSortable .card-header');
        cardHeaders.forEach((cardHeader) => {
            cardHeader.style.cursor = 'move';
        });
    </script>

    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js" integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8=" crossorigin="anonymous"></script>

    <!-- jsVectorMap -->
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/js/jsvectormap.min.js" integrity="sha256-/t1nN2956BT869E6H4V1dnt0X5pAQHPytli+1nTZm2Y=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/maps/world.js" integrity="sha256-XPpPaZlU8S/HWf7FZLAncLg2SAkP8ScUTII89x9D3lY=" crossorigin="anonymous"></script>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- Dynamic Content Loading Script -->
    <script>
        $(document).ready(function () {
            $('.dynamic-load').on('click', function (e) {
                e.preventDefault();
                const url = $(this).attr('href');
                $('.sidebar-menu .nav-link').removeClass('active');
                $(this).addClass('active');
                $.ajax({
                    url: url,
                    type: 'GET',
                    success: function (data) {
                        $('.app-main').html(data);
                        history.pushState(null, '', url);
                        document.title = $(data).find('h3').first().text() || 'AdminLTE Dashboard';
                    },
                    error: function (xhr, status, error) {
                        console.error('Error loading content:', error);
                        $('.app-main').html('<div class="alert alert-danger">Error loading content. Please try again.</div>');
                    }
                });
            });

            $(window).on('popstate', function () {
                const url = window.location.pathname + window.location.search;
                $.ajax({
                    url: url,
                    type: 'GET',
                    success: function (data) {
                        $('.app-main').html(data);
                        $('.sidebar-menu .nav-link').removeClass('active');
                        $(`.sidebar-menu .nav-link[href="${url}"]`).addClass('active');
                    },
                    error: function (xhr, status, error) {
                        console.error('Error loading content:', error);
                        $('.app-main').html('<div class="alert alert-danger">Error loading content. Please try again.</div>');
                    }
                });
            });
        });
    </script>

    <!-- Inline Styles for Header and Footer -->
    <style>
        /* Header Styles */
        .app-header {
            background: linear-gradient(45deg, #f8f9fa, #e9ecef) !important;
            border-bottom: 1px solid #dee2e6;
        }

        .navbar-brand .text-primary {
            color: #007bff !important;
            transition: color 0.3s ease;
        }

        .navbar-brand:hover .text-primary {
            color: #0056b3 !important;
        }

        .nav-link {
            position: relative;
            transition: color 0.3s ease;
        }

            .nav-link.hover-primary:hover {
                color: #007bff !important;
            }

            .nav-link::after {
                content: '';
                position: absolute;
                width: 0;
                height: 2px;
                bottom: 0;
                left: 0;
                background-color: #007bff;
                transition: width 0.3s ease;
            }

            .nav-link:hover::after {
                width: 100%;
            }

        .btn-outline-primary {
            border-color: #007bff;
            color: #007bff;
        }

            .btn-outline-primary:hover {
                background-color: #007bff;
                color: #fff;
            }

        /* Footer Styles */
        .app-footer {
            background: #007bff !important;
        }

            .app-footer a.text-warning {
                color: #ffc107 !important;
            }

                .app-footer a.text-warning:hover {
                    color: #ffca2c !important;
                }

            .app-footer a.text-white {
                color: #fff !important;
            }

            .app-footer a.hover-light:hover {
                color: #e9ecef !important;
            }

            .app-footer .list-inline-item {
                margin: 0 10px;
            }
    </style>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>